#include "log.wt"


// sum using balanced tree computation
// T = O(log n)
// W = O(n)
int sum(int A[_]) {
  int n = 2^log2(A.size),Y[n];
  pardo(i:n) Y[i]=0;
  pardo(i:A.size) Y[i]=A[i];

  for (int t = 0; 2 ^ t < n; t++)
    pardo(i : n / 2 ^ (t + 1)) 
      Y[i] = Y[2 * i] + Y[2 * i + 1];

  return Y[0];
}

